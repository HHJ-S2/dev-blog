---
date: '2022-09-12'
title: '생성자와 소멸자'
categories: ['TIL', 'Swift']
summary: '생성자와 소멸자'
---

## 생성자

```swift
struct Color1 {
  let red, green, blue: Double

  init(red: Double, green: Double, blue: Double) {
    self.red = red
    self.green = green
    self.blue = blue
  }

  init() {
    // 자신의 다른 생성자를 호출해서 값을 초기화 할 수 있다.
    self.init(red: 0.0, green: 0.0, blue: 0.0)
  }

  init(white: Double) {
    self.init(red: white, green: white, blue: white)
  }
}

class Color2 {
  let red, green, blue: Double

  init(red: Double, green: Double, blue: Double) {
    self.red = red
    self.green = green
    self.blue = blue
  }

  // 클래스에서 구조체와 같은 기능을 사용하려면
  // convenience 키워드를 표기해주어야 한다.
  convenience init() {
    self.init(red: 0.0, green: 0.0, blue: 0.0)
  }

  convenience init(white: Double) {
    self.init(red: white, green: white, blue: white)
  }
}
```

일반적인 `init() {}` 으로 생성하는 생성자는 지정생성자라고 한다.

클래스에서 자신의 다른 생성자를 사용하려면 `convenience` 키워드를 표기해야 하고, `self.init`으로 호출한다.

그리고 이것을 클래스에서는 편의생성자라고 한다. (구조체는 `convenience`키워드 필요없음.)

지정 생성자를 계속 재정의 하는것보다는 편의생성자를 사용하는것이 유지보수 측면에서 좋다.

<br/>

## 클래스에서 생성자의 상속이 일어나는 경우

```swift
class AClass {
  var x: Int
  var y: Int

  init(x: Int, y: Int) {
    self.x = x
    self.y = y
  }
}

class BClass: AClass {
  var z: Int

  // 저장속성 추가시 지정생성자로 구현
  init(x: Int, y: Int, z: Int) {
    self.z = z // 1. 내 저장속성의 값을 초기화 ⭐️
    super.init(x: x, y: y) // 2. 상속받은 지정생성자 초기화 ⭐️
  }

  // 저장속성을 추가하지 않고 상위클래스의 지정생성자만 재정의 하는경우 override
  //  override init(x: Int, y: Int) {
  //    super.init(x: x, y: y)
  //  }

  // 편의생성자로 구현
  convenience init() {
    self.init(x: 0, y: 0, z: 0) // 1. 자신의 지정생성자 초기화 ⭐️
  }
}
```

지정생성자는 하위클래스에 상속이 되지 않기때문에 상속을 받은 하위클래스에서 초기화를 해주어야 하는것이 필수다.

즉, 하위클래스에서 상위 클래스의 초기화되지 않은 생성자에 접근하려면 `super.init` 으로 꼭 상위의 지정생성자를 호출해주어야 한다.

편의생성자의 경우 자신의 지정생성자를 호출해주어야 하고, 하위클래스에서는 상위클래스의 편의생성자를 재정의 할 수 없다.

<br/>

#### 1️⃣ 상위 클래스의 지정생성자 체크

<br/>

#### 2️⃣ 상속받은 하위클래스에서 저장속성을 추가하는지 체크

<br/>

#### 추가해야하는 저장속성이 있는경우

1. 내 저장속성의 값을 초기화
2. 상속받은 지정생성자 초기화

#### 추가해야하는 저장속성이 없는경우

1. `override` 로 상위클래스의 지정생성자만 초기화

<br/>

결론은... 모든 지정생성자를 초기화 해주어야 인스턴스 사용이 가능하다.
